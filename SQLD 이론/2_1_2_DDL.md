# DDL

## 테이블 생성 규칙
  - 테이블명
    - 객체를 의미할 수 있는 이름으로 단수형을 권고함
    - 다른 테이블이름과 중복되어서는 안된다.
  - 컬럼명
    - 한 테이블 내에서는 칼럼명이 중복되지 않아야함.
    - 테이블 생성시 각 칼럼들은 괄호내에서 콤마로 구분됨.
    - 칼럼 뒤에 데이터 유형이 반드시 저정되어야함.
  - 테이블명 & 컬럼명
    - 사전에 정의된 예약어는 사용불가
    - 테이블명과 칼럼명에는 문자, 숫자, 일부기호(_, $, #)만 허용됨.
    - 테이블명과 컬럼명은 반드시 문자로 시작되야함 (숫자, 기호 불가능)
  - 제약조건명 : 다른 제약조건의 이름과 중복되지 않아야함.

## 오라클의 주요 데이터 타입
  - CHAR
    - 고정 문자열
    - 변수에 할당된 값이 고정길이보다 작은 경우, 나머지 공간에 공백이 채워짐.
  - VARCHAR2
    - 가변 길이 문자열
    - 변수에 할당된 값이 고정길이보다 작은 경우, 나머지 공간은 사용하지 않음.
  - NUMBER
  - DATE
    - 날짜와 시각 정보

## 제약조건(Constraint)
  - 정의 : `사용자가 원하는 조건의 데이터만 유지`하기 위한 방법
  - 종류
    - PRIMARY KEY
      - 기본키를 정의함
      - 하나의 테이블에 하나의 기본키 제약만 정의 가능
      - NOT NULL & UNIQUE
    - FOREIGN KEY
      - 다른 테이블의 기본키를 참조하는 외래키를 지정함
      - 외래키 지정시 참조 무결성 제약 옵션 선택
    - UNIQUE KEY
      - 해당 컬럼의 값이 테이블 내에서 유일해야 함을 제약하는 조건
    - NOT NULL
      - NULL 값의 입력을 허용하지 않는 제약 조건
    - CHECK
      - 입력할 수 있는 값을 제한하는 조건
  - 제약 조건명을 명시적으로 부여할수도 있고, 묵시적으로 제약 조건명 없이 제약 조건을 설정할 수도 있음.

## FK 제약 조건의 옵션
- 예) constraint fk1 foreign key (team_id) references tea(team_id)

- Referential Triggered Action
  - ON UPDATE, ON DELETE

- Referential Action
  - restrict(default) : 기본값의 삭제 또는 갱신을 불허
  - no ation : restrict와 동일하게 동작
  - cascade
    - 기본키가 `삭제`되면 해당 값을 외래키로 갖는 레코드 `삭제`
    - 기본키가 `갱신`되면 이를 참조하는 외래키를 새로운 값으로 `업데이트`
  - set null
    - 기본키가 `삭제 또는 갱신`되면 이를 참조하는 외래키를 `Null`로 업데이트

## ALTER문을 통한 테이블 변경
- 칼럼의 추가/삭제/수정, 제약 조건의 추가/삭제
- 칼럼의 추가(ADD)
  - 새로 추가한 칼럼은 테이블의 맨 마지막에 추가됨
  - ALTER TABLE 테이블명 ADD ();
- 칼럼의 삭제(DROP COLUMN)
  - 삭제 후 최소 하나 이상의 칼럼이 테이블에 존재해야함
  - ALTER TABLE 테이블명 DROP COLUMN ADDRESS;
- 칼럼명 변경(RENAME COLUMN)
  - 해당 칼럼의 모든 정의가 그대로 유지됨
  - ALTER TABLE 테이블명 RENAME COLUMN player_id to player_new_id;
- 칼럼의 정의 수정(MODIFY)
  - 이미 입력되어 있는 값에 영향을 미치는 변경은 허용하지 않음
  - 데이터 타입 변경
    - 테이블에 아무 행도 없거나, 해당 칼럼이 null만 갖고 있을 때 가능
  - 칼럼의 크기 변경
    - 칼럼의 크기 확대 -> 향상 가능
    - 칼럼의 크기 축소 -> 테이블에 아무 행도 없거나, 해당 칼럼이 Null만 갖고 있거나, 현재 저장된 값을 수용할수 있는 크기로 축소만 가능
  - DEFAULT값 추가 및 수정
    - 추가 및 수정 이후 삽입되는 행에만 영향을 미침
  - not null 제약조건 추가
    - 테이블에 아무 행도 없거나, 해당 칼럼에 null이 없을 때 가능
  - not null 제약조건 삭제 -> 항상 가능
  - not null 제약조건 추가 / 삭제
    - alter table 테이블명 modify (속성명 not null / null)

## RENAME 문을 통한 테이블 명칭 변경
- RENAME 기존 테이블명 TO 새 테이블명

## DROP 문을 통한 테이블 삭제
- DROP TABLE TEAM;
  - team이라는 테이블을 삭제하게 되면 참조무결성을 해칠 수 있다.
  - 관련 제약조건을 함께 삭제
  - DROP TABLE TEAM CASCADE CONSTRAINT;